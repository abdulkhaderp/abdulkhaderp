(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{102:function(e,a,t){"use strict";t.r(a);t(59);var n=t(0),r=t.n(n),l=t(24),c=t.n(l),i=(t(64),t(65),t(17)),o=t(10),u=t(22),s=t(25),m=t(14),d=t(15),p=t(18),v=t(16),f=t(19),y=t(11),h=t(12),M=t(105),b=t(106),D=t(103),I=t(104),E=t(21),g=t.n(E),N="http://eqaitsrv8580.cloudapp.net/eQAITAPI/api/1.2/",C={URL:{saveMaterialURL:N+"CreateMaterialDeliveryItems",getDeliveryItemsURL:N+"GetDeliveryItemsByManufacturer",authenticateURL:N+"authenticate"},AppCred:{UserName:"admin",Password:"admin"}},O=Object(n.createContext)({token:"",updateTokenValue:function(){}}),S=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(p.a)(this,(e=Object(v.a)(a)).call.apply(e,[this].concat(r)))).updateTokenValue=function(e){t.setState({token:"Bearer "+e})},t.state={token:"",updateTokenValue:t.updateTokenValue},t}return Object(f.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(O.Provider,{value:this.state},this.props.children)}}]),a}(r.a.Component),U=O.Consumer,T={error:"bg-danger",success:"bg-success",info:"bg-info"},k=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(p.a)(this,Object(v.a)(a).call(this,e))).handleSubmit=function(e){e.preventDefault(),t.setState({loadingScreen:!0});var a=[];t.state.values.map((function(e){e.Id&&e.Quantity&&a.push(e)}));var n={ManufacturerDeliveryId:parseInt(t.state.manufacturer),MaterialItemsModel:a},r={"Content-Type":"application/json",Authorization:t.context.token};g.a.post(C.URL.saveMaterialURL,n,{headers:r}).then((function(e){e&&200==e.status&&"OK"==e.statusText&&t.showToast("success","Saved Successfully")})).catch((function(e){t.showToast("error","Network Error occured!")})).finally((function(){t.setState({loadingScreen:!1})}))},t.handleChange=function(e){t.setState(Object(s.a)({},e.target.id,e.target.value))},t.state={manufacturer:"",values:[{Id:"",Quantity:""}],loadingScreen:!1,toastOpen:!1,toastType:"",toastMessage:""},t}return Object(f.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loadingScreen:!0});var a=new FormData;for(var t in C.AppCred)a.append(t,C.AppCred[t]);g.a.post(C.URL.authenticateURL,a,{headers:{"Content-Type":"multipart/form-data;boundary=----WebKitFormBoundaryFZ8NkdG0nndPIXDe"}}).then((function(a){a&&200==a.status&&"OK"==a.statusText&&e.context.updateTokenValue(a.data.token)})).catch((function(a){e.showToast("error","Failed to Authenticate!")})).finally((function(){e.setState({loadingScreen:!1})}))}},{key:"addClick",value:function(){this.state.values&&(this.state.values[this.state.values.length-1].Id&&this.state.values[this.state.values.length-1].Quantity?this.setState((function(e){return{values:[].concat(Object(u.a)(e.values),[{Id:"",Quantity:""}])}})):this.showToast("error","Please enter Id & Quantity"))}},{key:"showToast",value:function(e,a){var t=this;this.setState({toastOpen:!0}),this.setState({toastMessage:a}),this.setState({toastType:T[e]}),setTimeout((function(){t.setState({toastOpen:!1}),t.setState({toastType:""})}),5e3)}},{key:"removeClick",value:function(e){if(0!=e){var a=Object(u.a)(this.state.values);a.splice(e,1),this.setState({values:a})}}},{key:"handleIdChange",value:function(e,a){var t=Object(u.a)(this.state.values);t[e].Id=parseInt(a.target.value),this.setState({values:t})}},{key:"handleQuantityChange",value:function(e,a){var t=Object(u.a)(this.state.values);t[e].Quantity=parseInt(a.target.value),this.setState({values:t})}},{key:"createUI",value:function(){var e=this;return this.state.values.map((function(a,t){return r.a.createElement("div",{key:t,className:"form-row"},r.a.createElement("div",{className:"form-group col-md-5 col-sm-12"},r.a.createElement("input",{placeholder:"Enter Id",type:"number",value:a.Id||"",onChange:e.handleIdChange.bind(e,t),className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 col-sm-12"},r.a.createElement("input",{placeholder:"Enter Quantity",type:"number",value:a.Quantity||"",onChange:e.handleQuantityChange.bind(e,t),className:"form-control"})),r.a.createElement("div",{className:"trashIcon"},r.a.createElement(y.a,{className:"fa-lg mt-2 plusIcon ml-3",icon:h.e,onClick:e.removeClick.bind(e,t),title:"Delete Row"})))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(U,null,(function(){return r.a.createElement("div",{className:"content_wrapper"},r.a.createElement("div",{className:"p-3  my-2 rounded toast-container ".concat(e.state.toastType)},r.a.createElement(b.a,{isOpen:e.state.toastOpen},r.a.createElement(D.a,null,"Message"),r.a.createElement(I.a,null,e.state.toastMessage))),e.state.loadingScreen?r.a.createElement("div",{className:"load-overlay"},r.a.createElement(M.a,{className:"mtopfix",style:{width:"6rem",height:"6rem"},type:"grow",color:"dark"})):null,r.a.createElement("div",{className:"col-6 form_wrapper m-auto pb-2"},r.a.createElement("div",{className:"card"},r.a.createElement("h6",{className:"card-header"},"CREATE MATERIAL REQUEST"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group  col-md-6 col-sm-12"},r.a.createElement("label",null,"Manufacturer"),r.a.createElement("select",{type:"text",className:"form-control",id:"manufacturer",value:e.state.manufacturer,onChange:e.handleChange},r.a.createElement("option",{value:""},"--Select--"),r.a.createElement("option",{value:"1"},"Manufacturer-1"),r.a.createElement("option",{value:"2"},"Manufacturer-2"),r.a.createElement("option",{value:"3"},"Manufacturer-3"),r.a.createElement("option",{value:"4"},"Manufacturer-4")))),r.a.createElement("div",{className:"sub-section"},r.a.createElement("div",null,r.a.createElement("div",{className:"add-btn-container",onClick:e.addClick.bind(e)},r.a.createElement("span",null,"Add Id & Quantity"),r.a.createElement(y.a,{className:"fa-lg plusIcon ml-2",icon:h.c,title:"Add Row"}))),r.a.createElement("div",{className:"form-row col-md-8 col-sm-12 mt-2 "},e.createUI())),r.a.createElement("button",{type:"submit",className:"btn btn-primary mt-2 saveBtn",disabled:!e.state.manufacturer},"SAVE"))))))}))}}]),a}(r.a.Component);k.contextType=O;var w=k,R=t(50),x=t.n(R),A=t(53),Q=t(29),F=t.n(Q),B=(t(100),JSON.parse('[{"Id":3,"ManufacturerName":"COMMSCOPE","MaterialItems":[{"Oid":"edf0051e-57e3-4536-9ba8-7ab373f2b544","Description":"Handhole 2 Covers & Frame, Metallic, with hinges and lock","ArabicDescription":null,"Id":1,"UoM":1,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[{"Id":49,"ManufacturerDelivery":21,"MaterialItem":1,"Quantity":30.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:27.64","ForecastDate":null,"ManufacturerDeliveryNavigation":{"Id":21,"Manufacturer":3,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:35:02.36","ManufacturerNavigation":{"Id":3,"Name":"COMMSCOPE","Code":"COM","Country":1,"Telephone":"+966 565896564","Mobile":"+966 565896564","Fax":null,"Email":"motaz.abulibeh@commscope.com","Status":2,"Address":null,"Nftsname":null,"NameOnInvoice":"CommScope","UpdatedBy":null,"DateUpdated":null,"Oid":"a7d1c693-6b6e-4c8a-bac1-157355cfca6f","ManufacturerResponse":null,"ManufacturerDelivery":[],"ContractorPurchaseOrder":null,"Mmgrequest":null},"ManufacturerDeliveryItem":[{"Id":50,"ManufacturerDelivery":21,"MaterialItem":5,"Quantity":1.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:52.947","ForecastDate":null,"MaterialItemNavigation":{"Oid":"0ce35db3-0fe8-4aa0-b4e6-00d763db60b7","Description":"Duct Spacer, 5 x 20mm Ducts per row (Base Unit)","ArabicDescription":"\u0645\u0628\u0627\u0639\u062f \u0642\u0646\u0648\u0627\u062a (\u0642\u0627\u0639\u062f\u0629) , 5 \u0642\u0646\u0648\u0627\u062a \u0641\u064a \u0627\u0644\u0635\u0641 , \u0642\u0637\u0631 \u0627\u0644\u0642\u0646\u0627\u0629 \u0627\u0644\u062e\u0627\u0631\u062c\u064a (20\u0645\u0645)","Id":5,"UoM":null,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[]},"ManufacturerDeliveryInventoryTransaction":[]},{"Id":51,"ManufacturerDelivery":21,"MaterialItem":8,"Quantity":40.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:53.77","ForecastDate":null,"MaterialItemNavigation":{"Oid":"264268ab-3dd7-48ec-8ebf-01c517d5243b","Description":"Frame, 2 Cover Handhole , Rectangular 712 \xd7 1418 mm","ArabicDescription":"\u0627\u0637\u0627\u0631 \u0641\u062a\u062d\u0629 \u0627\u0644\u062a\u0641\u062a\u064a\u0634 \u0628\u063a\u0637\u0627\u0626\u064a\u0646 \u0645\u0633\u062a\u0637\u064a\u0644 \u0627\u0644\u0634\u0643\u0644 712\xd7 1418\u0645\u0645","Id":8,"UoM":null,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[]},"ManufacturerDeliveryInventoryTransaction":[]}]},"ManufacturerDeliveryInventoryTransaction":[]}]}],"Quantity":30.0,"SerialNumber":null,"DeliveryDate":"0001-01-01T00:00:00","TransactionDate":"0001-01-01T00:00:00","Facility":null},{"Id":3,"ManufacturerName":"COMMSCOPE","MaterialItems":[{"Oid":"0ce35db3-0fe8-4aa0-b4e6-00d763db60b7","Description":"Duct Spacer, 5 x 20mm Ducts per row (Base Unit)","ArabicDescription":"\u0645\u0628\u0627\u0639\u062f \u0642\u0646\u0648\u0627\u062a (\u0642\u0627\u0639\u062f\u0629) , 5 \u0642\u0646\u0648\u0627\u062a \u0641\u064a \u0627\u0644\u0635\u0641 , \u0642\u0637\u0631 \u0627\u0644\u0642\u0646\u0627\u0629 \u0627\u0644\u062e\u0627\u0631\u062c\u064a (20\u0645\u0645)","Id":5,"UoM":null,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[{"Id":50,"ManufacturerDelivery":21,"MaterialItem":5,"Quantity":1.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:52.947","ForecastDate":null,"ManufacturerDeliveryNavigation":{"Id":21,"Manufacturer":3,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:35:02.36","ManufacturerNavigation":{"Id":3,"Name":"COMMSCOPE","Code":"COM","Country":1,"Telephone":"+966 565896564","Mobile":"+966 565896564","Fax":null,"Email":"motaz.abulibeh@commscope.com","Status":2,"Address":null,"Nftsname":null,"NameOnInvoice":"CommScope","UpdatedBy":null,"DateUpdated":null,"Oid":"a7d1c693-6b6e-4c8a-bac1-157355cfca6f","ManufacturerResponse":null,"ManufacturerDelivery":[],"ContractorPurchaseOrder":null,"Mmgrequest":null},"ManufacturerDeliveryItem":[{"Id":49,"ManufacturerDelivery":21,"MaterialItem":1,"Quantity":30.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:27.64","ForecastDate":null,"MaterialItemNavigation":{"Oid":"edf0051e-57e3-4536-9ba8-7ab373f2b544","Description":"Handhole 2 Covers & Frame, Metallic, with hinges and lock","ArabicDescription":null,"Id":1,"UoM":1,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[]},"ManufacturerDeliveryInventoryTransaction":[]},{"Id":51,"ManufacturerDelivery":21,"MaterialItem":8,"Quantity":40.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:53.77","ForecastDate":null,"MaterialItemNavigation":{"Oid":"264268ab-3dd7-48ec-8ebf-01c517d5243b","Description":"Frame, 2 Cover Handhole , Rectangular 712 \xd7 1418 mm","ArabicDescription":"\u0627\u0637\u0627\u0631 \u0641\u062a\u062d\u0629 \u0627\u0644\u062a\u0641\u062a\u064a\u0634 \u0628\u063a\u0637\u0627\u0626\u064a\u0646 \u0645\u0633\u062a\u0637\u064a\u0644 \u0627\u0644\u0634\u0643\u0644 712\xd7 1418\u0645\u0645","Id":8,"UoM":null,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[]},"ManufacturerDeliveryInventoryTransaction":[]}]},"ManufacturerDeliveryInventoryTransaction":[]}]}],"Quantity":1.0,"SerialNumber":null,"DeliveryDate":"0001-01-01T00:00:00","TransactionDate":"0001-01-01T00:00:00","Facility":null},{"Id":3,"ManufacturerName":"COMMSCOPE","MaterialItems":[{"Oid":"264268ab-3dd7-48ec-8ebf-01c517d5243b","Description":"Frame, 2 Cover Handhole , Rectangular 712 \xd7 1418 mm","ArabicDescription":"\u0627\u0637\u0627\u0631 \u0641\u062a\u062d\u0629 \u0627\u0644\u062a\u0641\u062a\u064a\u0634 \u0628\u063a\u0637\u0627\u0626\u064a\u0646 \u0645\u0633\u062a\u0637\u064a\u0644 \u0627\u0644\u0634\u0643\u0644 712\xd7 1418\u0645\u0645","Id":8,"UoM":null,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[{"Id":51,"ManufacturerDelivery":21,"MaterialItem":8,"Quantity":40.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:53.77","ForecastDate":null,"ManufacturerDeliveryNavigation":{"Id":21,"Manufacturer":3,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:35:02.36","ManufacturerNavigation":{"Id":3,"Name":"COMMSCOPE","Code":"COM","Country":1,"Telephone":"+966 565896564","Mobile":"+966 565896564","Fax":null,"Email":"motaz.abulibeh@commscope.com","Status":2,"Address":null,"Nftsname":null,"NameOnInvoice":"CommScope","UpdatedBy":null,"DateUpdated":null,"Oid":"a7d1c693-6b6e-4c8a-bac1-157355cfca6f","ManufacturerResponse":null,"ManufacturerDelivery":[],"ContractorPurchaseOrder":null,"Mmgrequest":null},"ManufacturerDeliveryItem":[{"Id":49,"ManufacturerDelivery":21,"MaterialItem":1,"Quantity":30.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:27.64","ForecastDate":null,"MaterialItemNavigation":{"Oid":"edf0051e-57e3-4536-9ba8-7ab373f2b544","Description":"Handhole 2 Covers & Frame, Metallic, with hinges and lock","ArabicDescription":null,"Id":1,"UoM":1,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[]},"ManufacturerDeliveryInventoryTransaction":[]},{"Id":50,"ManufacturerDelivery":21,"MaterialItem":5,"Quantity":1.0,"UpdatedBy":null,"DateUpdated":"2019-12-16T09:59:52.947","ForecastDate":null,"MaterialItemNavigation":{"Oid":"0ce35db3-0fe8-4aa0-b4e6-00d763db60b7","Description":"Duct Spacer, 5 x 20mm Ducts per row (Base Unit)","ArabicDescription":"\u0645\u0628\u0627\u0639\u062f \u0642\u0646\u0648\u0627\u062a (\u0642\u0627\u0639\u062f\u0629) , 5 \u0642\u0646\u0648\u0627\u062a \u0641\u064a \u0627\u0644\u0635\u0641 , \u0642\u0637\u0631 \u0627\u0644\u0642\u0646\u0627\u0629 \u0627\u0644\u062e\u0627\u0631\u062c\u064a (20\u0645\u0645)","Id":5,"UoM":null,"ContractorRequestItem":null,"UoMNavigation":null,"ManufacturerDeliveryItem":[]},"ManufacturerDeliveryInventoryTransaction":[]}]},"ManufacturerDeliveryInventoryTransaction":[]}]}],"Quantity":40.0,"SerialNumber":null,"DeliveryDate":"0001-01-01T00:00:00","TransactionDate":"0001-01-01T00:00:00","Facility":null}]'),[{name:"Id",selector:"Id",sortable:!0,center:!0},{name:"Manufacturer",selector:"ManufacturerName",sortable:!0,center:!0},{name:"Quantity",selector:"Quantity",sortable:!0,center:!0},{name:"Delivery Date",selector:"DeliveryDate",sortable:!0,center:!0}]),j=[{label:"Id",key:"Id"},{label:"Manufacturer",key:"ManufacturerName"},{label:"Quantity",key:"Quantity"},{label:"Delivery Date",key:"DeliveryDate"}],P=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(p.a)(this,Object(v.a)(a).call(this,e))).handleSearch=function(e){var a=[];e.target.value?(t.state.fullData.map((function(t){t.ManufacturerName.toUpperCase().indexOf(e.target.value.toUpperCase())>-1&&a.push(t)})),t.setState({items:a})):t.setState({items:t.state.fullData})},t.exportPDF=function(){var e=new F.a("portrait","pt","A4");e.setFontSize(15);var a={startY:50,head:[["Id","Manufacturer","Quantity","Delivery Date"]],body:t.state.items.map((function(e){return[e.Id,e.ManufacturerName,e.Quantity,e.DeliveryDate]}))};e.text("REPORT",40,40),e.autoTable(a),e.save("report.pdf")},t.state={fullData:[],items:[],loadingScreen:!1,toastOpen:!1},t}return Object(f.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.context.token){this.setState({loadingScreen:!0});var a={"Content-Type":"application/json",Authorization:this.context.token};g.a.get(C.URL.getDeliveryItemsURL+"?ManufacturerName=COMMSCOPE",{headers:a}).then((function(a){a&&200==a.status&&"OK"==a.statusText&&(e.setState({fullData:JSON.parse(a.data)}),e.setState({items:JSON.parse(a.data)}))})).catch((function(a){e.setState({toastOpen:!0},(function(){setTimeout((function(){e.setState({toastOpen:!1})}),5e3)}))})).finally((function(){e.setState({loadingScreen:!1})}))}else this.props.history.push("/")}},{key:"render",value:function(){var e=this;return r.a.createElement(U,null,(function(){return r.a.createElement("div",{className:"content_wrapper"},e.state.toastOpen?r.a.createElement("div",{className:"p-3  my-2 rounded toast-container bg-danger"},r.a.createElement(b.a,null,r.a.createElement(D.a,null,"Message"),r.a.createElement(I.a,null,"Network Error:Failed to get data"))):null,e.state.loadingScreen?r.a.createElement("div",{className:"load-overlay"},r.a.createElement(M.a,{className:"mtopfix",style:{width:"6rem",height:"6rem"},type:"grow",color:"dark"})):null,r.a.createElement("div",{className:"container pt-5 pb-5"},r.a.createElement("div",{className:"global-filter-holder"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",onChange:e.handleSearch,placeholder:"Search...","aria-label":"Recipient's username","aria-describedby":"basic-addon2"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text",id:"basic-addon2"},r.a.createElement(y.a,{className:"fa-lg  ml-2",icon:h.d,title:""}))))),r.a.createElement("div",{className:"card list-wrapper"},r.a.createElement("h6",{className:"card-header defColor"},"VIEW MATERIAL REQUEST",r.a.createElement("button",{className:"export-btn export-csv"},r.a.createElement(A.CSVLink,{data:e.state.items,headers:j,filename:"AllItems.csv",className:""},r.a.createElement(y.a,{className:"fa-lg plusIcon ml-2",icon:h.a,title:"Export As CSV"}))),r.a.createElement("button",{className:"export-btn export-pdf",onClick:function(){return e.exportPDF()}},r.a.createElement(y.a,{className:"fa-lg plusIcon ml-2",icon:h.b,title:"Export As PDF"}))),r.a.createElement("div",{className:"card-body p-0"},r.a.createElement(x.a,{className:"display-table",columns:B,data:e.state.items,pagination:!0,paginationPerPage:5,paginationRowsPerPageOptions:[5,10,15]})))))}))}}]),a}(r.a.Component);P.contextType=O;var q=P;function L(){return r.a.createElement("span",null,"  ")}var V=function(){return r.a.createElement("div",{className:"nav_wrapper"},r.a.createElement("div",{className:"logo_wrapper"},r.a.createElement("div",null)),r.a.createElement("div",{className:"link_wrapper"},r.a.createElement("nav",null,r.a.createElement(i.b,{exact:!0,activeClassName:"active",to:"/"},"Create Request ",r.a.createElement(L,null)),r.a.createElement(i.b,{activeClassName:"active",to:"/display"},"View Requests"))))};var _=function(){return r.a.createElement("div",{className:"footer_wrapper"},r.a.createElement("span",null,"\xa9 Copyright 2020 . NT"))};var z=function(){return r.a.createElement(S,null,r.a.createElement(i.a,null,r.a.createElement("div",{className:"app_wrapper"},r.a.createElement(V,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:w}),r.a.createElement(o.a,{path:"/display",component:q})),r.a.createElement(_,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},58:function(e,a,t){e.exports=t(102)},64:function(e,a,t){},65:function(e,a,t){}},[[58,1,2]]]);
//# sourceMappingURL=main.296d110d.chunk.js.map